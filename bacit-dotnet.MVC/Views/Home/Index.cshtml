@*

*@
@{
}
@model bacit_dotnet.MVC.Models.HomeViewModel


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - NøstedWeb</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/bacit_dotnet.MVC.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <header>
      
        
        <div class="w-full fixed top-0 left-64 flex items-center bg-gray-800 p-5">
            <span class="sr-only">Search</span>
            <span class="absolute inset-y-0 left-0 flex items-center pl-2">
                <svg class="h-5 w-5 fill-slate-300" viewBox="0 0 20 20"><!-- ... --></svg>
            </span>

            
            
            <form id="searchForm" asp-action="Search" asp-controller="Home" method="get" class="flex items-center relative w-full max-w-xs">
                <input type="text" class="w-full pr-10 pl-3 py-2 border rounded-full text-sm focus:outline-none focus:border-gray-500" placeholder="Søk i tabellen..." name="searchValue" id="searchValue" required>
                <input type="hidden" name="searchBy" id="hiddenSearchBy" value="Navn">

                <button type="submit" class="absolute inset-y-0 right-0 flex items-center pr-3" value="Search">
                    <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 21l-6-6m2-6a8 8 0 11-16 0 8 8 0 0116 0z"></path>
                    </svg>
                </button>
            </form>

         

            <div class="flex-items-center ml-96">
                
                <a asp-area=""  asp-controller="Customer" asp-action="Customer" class="flex items-center text-gray-400 p-2 hover:bg-yellow-500 hover:text-white rounded text-lg transition duration-300 ease-in-out">
                    Opprett en ny sak
                    <i class="fas fa-plus ml-3"></i>
                </a>
                
            </div>

            

        </div>


        <div class="justify-center table-fixed mt-40 max-w-5xl mx-auto">
        
            <table class="min-w-full table-auto">


                <thead>
                    <tr>
                        <th class="px-4 py-2 bg-gradient-to-t from-gray-600 to-gray-800 text-gray-100 text-center" onclick="updateSearchBy(this, 'Sak.nr')">Sak.nr</th>
                        <th class="px-4 py-2 bg-gradient-to-t from-gray-600 to-gray-800 text-gray-100 text-center" onclick="updateSearchBy(this, 'Telefon')">Telefon</th>
                        <th class="px-4 py-2 bg-gradient-to-t from-gray-600 to-gray-800 text-gray-100 text-center" onclick="updateSerachBy(this, 'Navn')">Navn</th>
                        <th class="px-4 py-2 bg-gradient-to-t from-gray-600 to-gray-800 text-gray-100 text-center" onclick="updateSerachBy(this, 'Date')">Dato</th>
                        <th class="px-4 py-2 bg-gradient-to-t from-gray-600 to-gray-800 text-gray-100 text-center" onclick="updateSerachBy(this, 'Status')">Status</th>
                    </tr>
                </thead>
                <tbody>

                    @foreach (var customer in Model.Customers)
                    {
                        <tr onclick="location.href='@Url.Action("Edit", "Customer", new { id = customer.CustomerID })'">
                            <td class="text-center border p-2">@customer.CustomerID</td>
                            <td class="text-center border p-2">@customer.PhoneNumber</td>
                            <td class="text-center border p-2">@customer.FirstName</td>
                            @if (Model.ServiceOrders.Any(o => o.CustomerID == customer.CustomerID))
                            {
                                var serviceOrder = Model.ServiceOrders.First(o => o.CustomerID == customer.CustomerID);
                                <td class="text-center border p-2">@serviceOrder.DateReceived.ToString("dd-MM-yyyy")</td>
                                <td class="text-center border p-2">@serviceOrder.Status</td>
                            }
                            else
                            {                               
                                <td class="text-center border p-2"></td>
                                <td class="text-center border p-2"></td>
                            }
                        </tr>
                    }
                </tbody>
            </table>
           
        </div>
    </header>
    <script>
        

        function updateSearchBy(clickedElement, criteria) {
            
            document.getElementById('hiddenSearchBy').value = criteria;
        }


    </script>
</body>
</html>
